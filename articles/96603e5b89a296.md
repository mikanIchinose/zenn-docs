---
title: "[èª¿æŸ»è¨˜éŒ²] roborazziãŒè‡ªå‹•ç”Ÿæˆã—ãŸPreviewãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹"
emoji: "ğŸ”¥"
type: "tech"
topics: ["android"]
published: false
publication_name: "karabiner_inc"
---

# è«¸æ³¨æ„

æ¥­å‹™ã§å¾—ãŸçŸ¥è¦‹ãªã®ã§ã€è¨˜äº‹ã®ãªã‹ã§ç¤ºã™ã‚³ãƒ¼ãƒ‰ã¯æ”¹å¤‰ã—ã¦ã„ã¾ã™

# `./gradlew recordRoborazzi` ãŒæ­£å¸¸çµ‚äº†ã—ãªã„ï¼ï¼

å‰å›(https://zenn.dev/karabiner_inc/articles/4d939b478c5f40)ã€roborazziã‚’å°å…¥ã—ã¦ã¯ã¾ã£ãŸç‚¹ã«ã¤ã„ã¦ã®è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚
å®Ÿã¯ãã®è£ã§ã‚‚ã£ã¨ã¯ã¾ã£ã¦ã„ãŸã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚
ãã‚Œã¯ã€`./gradlew recordRoborazzi`ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚ã†ã¨ã—ã¦ã‚‚ã‚¿ã‚¹ã‚¯ãŒæ­£å¸¸çµ‚äº†ã›ãšã«ã€ç”»åƒãŒå‡ºåŠ›ã•ã‚Œãªã„ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚

çµŒç·¯

1. ã¨ã‚Šã‚ãˆãšã€roborazziãŒå°å…¥ã§ãã‚‹ã‹è©¦ã—ã¦ã¿ã‚‹
    - ã§ããŸï¼
1. æ¯é€±å®Ÿæ–½ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã£ã¦firebase-bomã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸ŠãŒã‚‹(33.3.0 â†’ 33.4.0)
1. ãƒ™ãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒã‚’æ›´æ–°ã—ã¦ã€å†åº¦ç¢ºèª
    - ãªãœã‹å¤±æ•—ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚ã€‚ã€‚

ãªã«ãŒã¤ã‚‰ã„ã£ã¦ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹æƒ…å ±ãŒçš†ç„¡ãªã‚“ã§ã™ã‚ˆã­ã€‚ã€‚

```
```

ãã—ã¦ã€ã“ã®çŠ¶æ…‹ã§å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã‚Œã‚‚ãªãœã‹å¤±æ•—ã™ã‚‹ã¨ã„ã†çŠ¶æ³ã€‚ã€‚

# æš«å®šå¯¾å¿œ

CIã§å®Ÿè¡Œã—ã¦ã„ã‚‹å˜ä½“ãƒ†ã‚¹ãƒˆã‚‚å¤±æ•—ã—ã¦ã„ã‚‹çŠ¶æ³ã¯çœ‹éã§ããªã„ã®ã§ã€ä¸€æ—¦roborazziç”¨ã®ãƒ“ãƒ«ãƒ‰è¨­å®šã¯`roborazzi.gradle`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ‡ã‚Šå‡ºã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã—ãŸã„ã¨ãã«é©ç”¨ã™ã‚‹ã¨ã„ã†é‹ç”¨ã«ã—ã¾ã—ãŸ
 
```groovy
// roborazzi.gradle
apply plugin: libs.plugins.roborazzi.get().pluginId

android {
    testOptions {
        unitTests {
            includeAndroidResources = true
            all {
                it.systemProperties["robolectric.pixelCopyRenderMode"] = "hardware"
            }
        }
    }
}

roborazzi.generateComposePreviewRobolectricTests.enable.set(true)
roborazzi.generateComposePreviewRobolectricTests.packages.set(["your.package.name"])
roborazzi.generateComposePreviewRobolectricTests.includePrivatePreviews.set(true)

dependencies {
    testImplementation(libs.junit)
    testImplementation(libs.robolectric)
    testImplementation(libs.roborazzi)
    testImplementation(libs.roborazzi.compose)
    testImplementation(libs.roborazzi.rule)
    testImplementation(libs.roborazziComposePreviewScannerSupport)
    testImplementation(libs.composablePreviewScannerAndroid)
}
```

```groovy
// ...
apply from: "path/to/roborazzi.gradle"
```

roborazziã‚’ä½¿ã†æ‰‹é †
1. firebase-bomã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’33.3.0ã«ä¸‹ã’ã‚‹
1. roborazzi.gradleã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å¤–ã™


# ã©ã†ã‚„ã‚‰app-moduleã ã‘ãŒå¤±æ•—ã™ã‚‹ã‚‰ã—ã„

# Firebaseé–¢é€£ã®å®Ÿè£…ã‚’æ¶ˆã—ãŸã‚Šã€Fakeã«å·®ã—æ›¿ãˆã‚‹ã“ã¨ã§æˆåŠŸã™ã‚‹ã‚ˆã†ã«ãªã£ãŸğŸ‰

# ã¤ãã¯ã©ã†ã™ã‚‹ã®ã‹

