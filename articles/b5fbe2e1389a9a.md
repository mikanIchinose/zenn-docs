---
title: "iOSのようにGoogle Play Consoleで段階的リリースを自動化するCustom Actionを作りました"
emoji: "🤖"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["android", "githubactions"]
published: false
---

# 作ったもの

Google Playで段階的リリースしているアプリの公開率を自動で更新するCustom Actionを作りました。
Custom Actionが実際にやっていることは現在の公開率を取得して、次の公開率を算出し、Google Play Publication APIを使って公開率を更新することです。
これをcronで定期的に実行することで、段階的リリースを自動化しました。

# 開発のモチベーション

iOSアプリの段階的リリースは、App Storeによって自動で公開率が更新されますが、Androidアプリの段階的リリースはGoogle Play Consoleにいって手動で公開率を更新する必要があります。
この手間をなくし、iOSのように段階的リリースを自動化したいと思い、Custom Actionを作成しました。

# 機能

- 現在の公開率を取得
- 次の公開率を算出
- Google Play ConsoleのAPIを使って公開率を更新
- dry-runオプションで実際に更新する前に次の公開率を確認可能

# 作り方
## 1. googleapiの使い方がわからないのでサンプル実装を作った
## 2. Custom Actionの仕様を作成
## 3. Let's Vibe Coding
